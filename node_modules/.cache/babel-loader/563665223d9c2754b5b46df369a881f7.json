{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Noticia from'../../models/noticia.model';import Cabecalho from'../../utils/cabecalho';import Menu from'../../utils/menu';import TabelaNoticias from'./tabela/tabela-noticias';import EditarNoticia from'./formulario/editar-noticia';import CadastrarNoticia from'./formulario/cadastrar-noticia';import{Container,Row,Col,Modal,Button}from'react-bootstrap';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Noticias(){var API_URL_LISTAR_NOTICIAS='http://localhost/restful/noticias';var _useState=useState(true),_useState2=_slicedToArray(_useState,2),exibirTabela=_useState2[0],setExibirTabela=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),exibirEditar=_useState4[0],setExibirEditar=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),exibirCadastrar=_useState6[0],setExibirCadastrar=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),noticias=_useState8[0],setNoticias=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),carregarNoticias=_useState10[0],setCarregarNoticias=_useState10[1];var _useState11=useState(new Noticia()),_useState12=_slicedToArray(_useState11,2),noticia=_useState12[0],setNoticia=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),carregarNoticia=_useState14[0],setCarregarNoticia=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),paginaAtual=_useState16[0],setPaginaAtual=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),ordenar=_useState18[0],setOrdenar=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),filtro=_useState20[0],setFiltro=_useState20[1];var _useState21=useState(3),_useState22=_slicedToArray(_useState21,2),countPage=_useState22[0],setCountPage=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),totalItems=_useState24[0],setTotalItems=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),messagem=_useState26[0],setMessagem=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),exibirModalErro=_useState28[0],setExibirModalErro=_useState28[1];useEffect(function(){function obterNoticias(){return _obterNoticias.apply(this,arguments);}function _obterNoticias(){_obterNoticias=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var ordem,params,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;ordem='';if(ordenar===1){ordem='codigo ASC';}else if(ordenar===2){ordem='codigo DESC';}else if(ordenar===3){ordem='titulo ASC';}else if(ordenar===4){ordem='titulo DESC';}params=\"?page=\".concat(paginaAtual,\"&countpage=\").concat(countPage,\"&order=\").concat(ordem,\"&filter=\").concat(filtro);_context.next=6;return axios.get(API_URL_LISTAR_NOTICIAS+params);case 6:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(data.status==='success'){setNoticias(data.data);setTotalItems(parseInt(data.count));}else{setMessagem(data.response);setExibirModalErro(true);}_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setNoticias([]);setMessagem(_context.t0.message);setExibirModalErro(true);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _obterNoticias.apply(this,arguments);}if(carregarNoticias){obterNoticias();setCarregarNoticias(false);}},[carregarNoticias,paginaAtual,countPage,ordenar,filtro]);function handleExibirTabela(){setExibirTabela(true);setExibirEditar(false);setExibirCadastrar(false);}function handleExibirCadastrar(){setExibirCadastrar(true);setExibirTabela(false);setExibirEditar(false);setCarregarNoticia(true);}function handleExibirEditar(noticia){setNoticia(noticia);setExibirEditar(true);setExibirTabela(false);setExibirCadastrar(false);setCarregarNoticia(true);}function handleMudarPagina(pagina){setPaginaAtual(pagina);setCarregarNoticias(true);}function handleFecharModalErro(){setExibirModalErro(false);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Cabecalho,{}),/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,className:\"vh-100\",children:/*#__PURE__*/_jsx(Menu,{})}),/*#__PURE__*/_jsxs(Col,{md:10,children:[/*#__PURE__*/_jsx(TabelaNoticias,{visivel:exibirTabela,handleExibirCadastrar:handleExibirCadastrar,handleExibirEditar:handleExibirEditar,noticias:noticias,setRecarregarNoticias:setCarregarNoticias,totalItems:totalItems,paginaAtual:paginaAtual,handleMudarPagina:handleMudarPagina,countPage:countPage,setCountPage:setCountPage,filtro:filtro,setFiltro:setFiltro,ordenar:ordenar,setOrdenar:setOrdenar}),/*#__PURE__*/_jsx(CadastrarNoticia,{visivel:exibirCadastrar,handleExibirTabela:handleExibirTabela,setRecarregarNoticias:setCarregarNoticias,carregarNoticia:carregarNoticia,setCarregarNoticia:setCarregarNoticia}),/*#__PURE__*/_jsx(EditarNoticia,{visivel:exibirEditar,handleExibirTabela:handleExibirTabela,setRecarregarNoticias:setCarregarNoticias,noticia:noticia,carregarNoticia:carregarNoticia,setCarregarNoticia:setCarregarNoticia})]})]})}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalErro,onHide:handleFecharModalErro,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Erro\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"Erro ao buscar Not\\xEDcias: \",messagem]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:handleFecharModalErro,children:\"Fechar\"})})]})]});}export default Noticias;","map":{"version":3,"names":["useState","useEffect","Noticia","Cabecalho","Menu","TabelaNoticias","EditarNoticia","CadastrarNoticia","Container","Row","Col","Modal","Button","axios","Noticias","API_URL_LISTAR_NOTICIAS","exibirTabela","setExibirTabela","exibirEditar","setExibirEditar","exibirCadastrar","setExibirCadastrar","noticias","setNoticias","carregarNoticias","setCarregarNoticias","noticia","setNoticia","carregarNoticia","setCarregarNoticia","paginaAtual","setPaginaAtual","ordenar","setOrdenar","filtro","setFiltro","countPage","setCountPage","totalItems","setTotalItems","messagem","setMessagem","exibirModalErro","setExibirModalErro","obterNoticias","ordem","params","get","data","status","parseInt","count","response","message","handleExibirTabela","handleExibirCadastrar","handleExibirEditar","handleMudarPagina","pagina","handleFecharModalErro"],"sources":["C:/Users/anderson/Documents/instituto-itaquere/dashboard/src/components/noticias/noticias.js"],"sourcesContent":["import {\r\n    useState,\r\n    useEffect,\r\n} from 'react';\r\nimport Noticia from '../../models/noticia.model';\r\nimport Cabecalho from '../../utils/cabecalho';\r\nimport Menu from '../../utils/menu';\r\nimport TabelaNoticias from './tabela/tabela-noticias';\r\nimport EditarNoticia from './formulario/editar-noticia';\r\nimport CadastrarNoticia from './formulario/cadastrar-noticia';\r\nimport { \r\n    Container,\r\n    Row,\r\n    Col,\r\n    Modal,\r\n    Button\r\n} from 'react-bootstrap';\r\nimport axios from 'axios';\r\n\r\nfunction Noticias() {\r\n\r\n    const API_URL_LISTAR_NOTICIAS = 'http://localhost/restful/noticias';\r\n\r\n    const [exibirTabela, setExibirTabela] = useState(true);\r\n    const [exibirEditar, setExibirEditar] = useState(false);\r\n    const [exibirCadastrar, setExibirCadastrar] = useState(false);\r\n    const [noticias, setNoticias] = useState([]);\r\n    const [carregarNoticias, setCarregarNoticias] = useState(true);\r\n    const [noticia, setNoticia] = useState(new Noticia());\r\n    const [carregarNoticia, setCarregarNoticia] = useState(false);\r\n    const [paginaAtual, setPaginaAtual] = useState(1);\r\n    const [ordenar, setOrdenar] = useState(0);\r\n    const [filtro, setFiltro] = useState('');\r\n    const [countPage, setCountPage] = useState(3);\r\n    const [totalItems, setTotalItems] = useState(0);\r\n    const [messagem, setMessagem] = useState('');\r\n    const [exibirModalErro, setExibirModalErro] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        async function obterNoticias(){\r\n            try{\r\n                let ordem = '';\r\n                if(ordenar === 1){\r\n                    ordem = 'codigo ASC';\r\n                } else if(ordenar === 2){\r\n                    ordem = 'codigo DESC';\r\n                } else if(ordenar === 3){\r\n                    ordem = 'titulo ASC';\r\n                } else if(ordenar === 4){\r\n                    ordem = 'titulo DESC';\r\n                } \r\n                const params = `?page=${paginaAtual}&countpage=${countPage}&order=${ordem}&filter=${filtro}`;\r\n                let { data } = await axios.get(API_URL_LISTAR_NOTICIAS + params);\r\n                if(data.status==='success'){\r\n                    setNoticias(data.data);\r\n                    setTotalItems(parseInt(data.count));\r\n                } else {\r\n                    setMessagem(data.response);\r\n                    setExibirModalErro(true);\r\n                }\r\n            } catch(err){\r\n                setNoticias([]);\r\n                setMessagem(err.message);\r\n                setExibirModalErro(true);\r\n            }\r\n        }\r\n\r\n        if(carregarNoticias){\r\n            obterNoticias();\r\n            setCarregarNoticias(false);\r\n        }\r\n    }, [carregarNoticias, paginaAtual, countPage, ordenar, filtro]);\r\n\r\n    function handleExibirTabela(){\r\n        setExibirTabela(true);\r\n        setExibirEditar(false);\r\n        setExibirCadastrar(false);\r\n    }\r\n\r\n    function handleExibirCadastrar(){\r\n        setExibirCadastrar(true);\r\n        setExibirTabela(false);\r\n        setExibirEditar(false);\r\n        setCarregarNoticia(true);\r\n    }\r\n\r\n    function handleExibirEditar(noticia){\r\n        setNoticia(noticia);\r\n        setExibirEditar(true);\r\n        setExibirTabela(false);\r\n        setExibirCadastrar(false);\r\n        setCarregarNoticia(true);\r\n    }\r\n\r\n    function handleMudarPagina(pagina) {\r\n        setPaginaAtual(pagina);\r\n        setCarregarNoticias(true);\r\n    }\r\n\r\n    function handleFecharModalErro(){\r\n        setExibirModalErro(false);\r\n    }\r\n\r\n    return ( \r\n        <div>\r\n            <Cabecalho />\r\n            <Container \r\n                fluid>\r\n                <Row>\r\n                    <Col \r\n                        md={2}\r\n                        className=\"vh-100\" >\r\n                        <Menu />\r\n                    </Col>\r\n                    <Col md={10} >\r\n                        <TabelaNoticias\r\n                            visivel={exibirTabela}\r\n                            handleExibirCadastrar={handleExibirCadastrar}\r\n                            handleExibirEditar={handleExibirEditar}\r\n                            noticias={noticias}\r\n                            setRecarregarNoticias={setCarregarNoticias}\r\n                            totalItems={totalItems} \r\n                            paginaAtual={paginaAtual} \r\n                            handleMudarPagina={handleMudarPagina}\r\n                            countPage={countPage}\r\n                            setCountPage={setCountPage}\r\n                            filtro={filtro}\r\n                            setFiltro={setFiltro}\r\n                            ordenar={ordenar}\r\n                            setOrdenar={setOrdenar}/>\r\n                        <CadastrarNoticia\r\n                            visivel={exibirCadastrar}\r\n                            handleExibirTabela={handleExibirTabela}\r\n                            setRecarregarNoticias={setCarregarNoticias}\r\n                            carregarNoticia={carregarNoticia} \r\n                            setCarregarNoticia={setCarregarNoticia}/>\r\n                        <EditarNoticia\r\n                            visivel={exibirEditar}\r\n                            handleExibirTabela={handleExibirTabela}\r\n                            setRecarregarNoticias={setCarregarNoticias}\r\n                            noticia={noticia}\r\n                            carregarNoticia={carregarNoticia} \r\n                            setCarregarNoticia={setCarregarNoticia}/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            <Modal \r\n                show={exibirModalErro} \r\n                onHide={handleFecharModalErro}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Erro\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    Erro ao buscar Notícias: {messagem}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"warning\"\r\n                        onClick={handleFecharModalErro}>\r\n                        Fechar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div> \r\n     );\r\n}\r\n\r\nexport default Noticias;"],"mappings":"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"},"metadata":{},"sourceType":"module"}