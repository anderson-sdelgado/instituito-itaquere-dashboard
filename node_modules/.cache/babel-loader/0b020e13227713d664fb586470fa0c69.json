{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{Card,Button,Container,Row,Col,Form,Modal,Image}from'react-bootstrap';import Usuario from'../../../models/usuario.model';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditarUsuario(props){var URL_CADASTRAR_USUARIO='http://www.institutoitaquere.org.br/restful/usuarios';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),codigo=_useState2[0],setCodigo=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),nome=_useState4[0],setNome=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),senha=_useState6[0],setSenha=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),exibirModalSucesso=_useState8[0],setExibirModalSucesso=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),exibirModalErro=_useState10[0],setExibirModalErro=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),messagem=_useState12[0],setMessagem=_useState12[1];useEffect(function(){function obterUsuario(){setCodigo(props.usuario.codigo);setNome(props.usuario.nome);setSenha(props.usuario.senha);}if(props.carregarUsuario){obterUsuario();props.setCarregarUsuario(false);}},[props.carregarUsuario]);function salvarUsuario(_x){return _salvarUsuario.apply(this,arguments);}function _salvarUsuario(){_salvarUsuario=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var novoUsuario,formData,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();novoUsuario=new Usuario(nome,senha);formData=new FormData();formData.append('data',JSON.stringify(novoUsuario));formData.append('method','put');_context.next=8;return axios.post(URL_CADASTRAR_USUARIO+'/'+codigo,formData);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.status==='success'){setMessagem(data.response);setExibirModalSucesso(true);}else{setMessagem(\"Erro na Edição de Registro: \"+data.response);setExibirModalErro(true);}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);setMessagem(\"Erro na Edição de Registro: \"+_context.t0.message);setExibirModalErro(true);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _salvarUsuario.apply(this,arguments);}function visivel(){return props.visivel?'mt-3':'hidden';}function handleNome(event){setNome(event.target.value);}function handleSenha(event){setSenha(event.target.value);}function handleFecharModalSucesso(){setExibirModalSucesso(false);props.handleExibirTabela();props.setRecarregarUsuarios(true);}function handleFecharModalErro(){setExibirModalErro(false);props.handleExibirTabela();props.setRecarregarUsuarios(true);}return/*#__PURE__*/_jsxs(\"div\",{className:visivel(),children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Editar Usuario\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:salvarUsuario,children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,children:[/*#__PURE__*/_jsx(Form.Label,{column:true,md:2,children:\"Codigo:\"}),/*#__PURE__*/_jsx(Form.Label,{column:true,md:10,children:codigo})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-2\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,md:2,children:\"Nome:\"}),/*#__PURE__*/_jsx(Col,{md:10,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:nome,onChange:handleNome,required:true})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-2\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,md:2,children:\"Senha:\"}),/*#__PURE__*/_jsx(Col,{md:10,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:senha,onChange:handleSenha,required:true})})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-3\",children:[/*#__PURE__*/_jsx(Col,{className:\"text-end\",md:6,children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:props.handleExibirTabela,children:\"Cancelar\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-start\",md:6,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Salvar\"})})]})]})})})]}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalSucesso,onHide:handleFecharModalSucesso,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Sucesso\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:messagem}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:handleFecharModalSucesso,children:\"Continuar\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalErro,onHide:handleFecharModalErro,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Erro\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:messagem}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:handleFecharModalErro,children:\"Fechar\"})})]})]});}export default EditarUsuario;","map":{"version":3,"names":["useState","useEffect","Card","Button","Container","Row","Col","Form","Modal","Image","Usuario","axios","EditarUsuario","props","URL_CADASTRAR_USUARIO","codigo","setCodigo","nome","setNome","senha","setSenha","exibirModalSucesso","setExibirModalSucesso","exibirModalErro","setExibirModalErro","messagem","setMessagem","obterUsuario","usuario","carregarUsuario","setCarregarUsuario","salvarUsuario","event","preventDefault","novoUsuario","formData","FormData","append","JSON","stringify","post","data","status","response","message","visivel","handleNome","target","value","handleSenha","handleFecharModalSucesso","handleExibirTabela","setRecarregarUsuarios","handleFecharModalErro"],"sources":["C:/Users/anderson/Documents/instituto-itaquere/dashboard/src/components/usuarios/formulario/editar-usuario.js"],"sourcesContent":["import {\r\n    useState,\r\n    useEffect,\r\n} from 'react';\r\nimport { \r\n    Card,\r\n    Button,\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    Modal,\r\n    Image\r\n} from 'react-bootstrap';\r\nimport Usuario from '../../../models/usuario.model';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction EditarUsuario(props) {\r\n\r\n    const URL_CADASTRAR_USUARIO = 'http://www.institutoitaquere.org.br/restful/usuarios';\r\n\r\n    const [codigo, setCodigo] = useState('');\r\n    const [nome, setNome] = useState('');\r\n    const [senha, setSenha] = useState('');\r\n    const [exibirModalSucesso, setExibirModalSucesso] = useState(false);\r\n    const [exibirModalErro, setExibirModalErro] = useState(false);\r\n    const [messagem, setMessagem] = useState('');\r\n\r\n    useEffect(() => {\r\n\r\n        function obterUsuario(){\r\n            setCodigo(props.usuario.codigo);\r\n            setNome(props.usuario.nome);\r\n            setSenha(props.usuario.senha);\r\n        }\r\n\r\n        if(props.carregarUsuario){\r\n            obterUsuario();\r\n            props.setCarregarUsuario(false);\r\n        }\r\n    }, [props.carregarUsuario]);\r\n\r\n\r\n    async function salvarUsuario(event){\r\n        try {\r\n            event.preventDefault();\r\n            const novoUsuario = new Usuario(nome, senha);\r\n            const formData = new FormData();\r\n            formData.append('data', JSON.stringify(novoUsuario));\r\n            formData.append('method', 'put');\r\n            let { data } = await axios.post(URL_CADASTRAR_USUARIO + '/' + codigo, formData);\r\n            if(data.status==='success'){\r\n                setMessagem(data.response);\r\n                setExibirModalSucesso(true);\r\n            } else {\r\n                setMessagem(\"Erro na Edição de Registro: \" + data.response);\r\n                setExibirModalErro(true);\r\n            }\r\n        } catch (err) {\r\n            setMessagem(\"Erro na Edição de Registro: \" + err.message);\r\n            setExibirModalErro(true);\r\n        }\r\n    }\r\n\r\n    function visivel() {\r\n        return props.visivel ? 'mt-3' : 'hidden';\r\n    }\r\n\r\n    function handleNome(event){\r\n        setNome(event.target.value);\r\n    }\r\n\r\n    function handleSenha(event){\r\n        setSenha(event.target.value);\r\n    }\r\n\r\n    function handleFecharModalSucesso(){\r\n        setExibirModalSucesso(false);\r\n        props.handleExibirTabela();\r\n        props.setRecarregarUsuarios(true);\r\n    }\r\n\r\n    function handleFecharModalErro(){\r\n        setExibirModalErro(false);\r\n        props.handleExibirTabela();\r\n        props.setRecarregarUsuarios(true);\r\n    }\r\n\r\n    return ( \r\n        <div\r\n            className={visivel()}>\r\n            <Card >\r\n                <Card.Header>\r\n                    <h2>\r\n                        Editar Usuario\r\n                    </h2>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                    <Container >\r\n                        <Form \r\n                            onSubmit={salvarUsuario}>\r\n                            <Form.Group\r\n                                as={Row}>\r\n                                <Form.Label\r\n                                        column\r\n                                        md={2}>\r\n                                    Codigo:\r\n                                </Form.Label>\r\n                                <Form.Label\r\n                                        column\r\n                                        md={10}>\r\n                                    {codigo}\r\n                                </Form.Label>\r\n                            </Form.Group>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Form.Label\r\n                                        column\r\n                                        md={2}>\r\n                                    Nome:\r\n                                </Form.Label>\r\n                                <Col \r\n                                    md={10}>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={nome} \r\n                                        onChange={handleNome}\r\n                                        required />\r\n                                </Col>\r\n                            </Form.Group>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Form.Label\r\n                                        column\r\n                                        md={2}>\r\n                                    Senha:\r\n                                </Form.Label>\r\n                                <Col \r\n                                    md={10}>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={senha} \r\n                                        onChange={handleSenha}\r\n                                        required />\r\n                                </Col>\r\n                            </Form.Group>\r\n                            <Form.Group \r\n                                as={Row} \r\n                                className=\"mt-3\">\r\n                                <Col \r\n                                    className=\"text-end\"\r\n                                    md={6}>\r\n                                    <Button \r\n                                        variant=\"danger\"\r\n                                        onClick={props.handleExibirTabela} >\r\n                                        Cancelar\r\n                                    </Button>\r\n                                </Col>\r\n                                <Col \r\n                                    className=\"text-start\"\r\n                                    md={6}>\r\n                                    <Button \r\n                                        variant=\"primary\" \r\n                                        type=\"submit\">\r\n                                        Salvar\r\n                                    </Button>\r\n                                </Col>\r\n                            </Form.Group>\r\n                        </Form>\r\n                    </Container>\r\n                </Card.Body>\r\n            </Card>\r\n            <Modal \r\n                show={exibirModalSucesso} \r\n                onHide={handleFecharModalSucesso} >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Sucesso\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {messagem}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"success\"\r\n                        onClick={handleFecharModalSucesso}>\r\n                        Continuar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            <Modal \r\n                show={exibirModalErro} \r\n                onHide={handleFecharModalErro}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Erro\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {messagem}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"warning\"\r\n                        onClick={handleFecharModalErro}>\r\n                        Fechar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n        \r\n     );\r\n}\r\n\r\nEditarUsuario.propTypes = {\r\n    visivel: PropTypes.bool.isRequired,\r\n    handleExibirTabela: PropTypes.func.isRequired,\r\n    setRecarregarUsuarios: PropTypes.func.isRequired,\r\n    usuario: PropTypes.object.isRequired,\r\n    carregarUsuario: PropTypes.bool.isRequired,\r\n    setCarregarUsuario: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default EditarUsuario;"],"mappings":"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"},"metadata":{},"sourceType":"module"}