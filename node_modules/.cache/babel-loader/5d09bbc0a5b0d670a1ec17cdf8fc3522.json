{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faThumbsUp,faThumbsDown}from'@fortawesome/free-solid-svg-icons';import{Button,Modal}from'react-bootstrap';import axios from'axios';import Noticia from'../../../models/noticia.model';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AlterarStatusNoticia(props){var API_URL_REMOVER_NOTICIA='http://localhost/restful/noticias/';var _useState=useState(false),_useState2=_slicedToArray(_useState,2),exibirModal=_useState2[0],setExibirModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),exibirModalSucesso=_useState4[0],setExibirModalSucesso=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),exibirModalErro=_useState6[0],setExibirModalErro=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),messagem=_useState8[0],setMessagem=_useState8[1];function handleAbrirModal(event){event.preventDefault();setExibirModal(true);}function handleFecharModal(){setExibirModal(false);}function handleFecharModalSucesso(){setExibirModalSucesso(false);props.setRecarregarNoticias(true);}function handleFecharModalErro(){setExibirModalErro(false);props.setRecarregarNoticias(true);}function descricaoStatus(){return props.noticia.status==='S'?'desativar':'ativar';}function iconStatus(){return props.noticia.status==='S'?faThumbsUp:faThumbsDown;}function handleRemoverTarefa(_x){return _handleRemoverTarefa.apply(this,arguments);}function _handleRemoverTarefa(){_handleRemoverTarefa=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var status,novaNoticia,formData,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;status=props.noticia.status==='S'?'N':'S';novaNoticia=new Noticia('','',status);formData=new FormData();formData.append('data',JSON.stringify(novaNoticia));formData.append('method','status');_context.next=9;return axios.post(API_URL_REMOVER_NOTICIA+props.noticia.codigo,formData);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setExibirModal(false);if(data.status==='success'){setMessagem(data.response);setExibirModalSucesso(true);}else{setMessagem(\"Erro na Exclusão do Registro: \"+data.response);setExibirModalErro(true);}_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);setExibirModal(false);setMessagem(\"Erro na Exclusão do Registro: \"+_context.t0.message);setExibirModalErro(true);case 20:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);}));return _handleRemoverTarefa.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{className:'btn btn-light btn-sm',onClick:handleAbrirModal,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:iconStatus()})}),/*#__PURE__*/_jsxs(Modal,{show:exibirModal,onHide:handleFecharModal,\"data-testid\":\"modal\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Remover tarefa\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"Deseja realmente \",descricaoStatus(),\" a noticia?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:props.noticia.titulo})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleRemoverTarefa,\"data-testid\":\"btn-remover\",children:\"Sim\"}),/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:handleFecharModal,\"data-testid\":\"btn-fechar-modal\",children:\"N\\xE3o\"})]})]}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalSucesso,onHide:handleFecharModalSucesso,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Sucesso\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:messagem}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:handleFecharModalSucesso,children:\"Continuar\"})})]}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalErro,onHide:handleFecharModalErro,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Erro\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:messagem}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:handleFecharModalErro,children:\"Fechar\"})})]})]});}export default AlterarStatusNoticia;","map":{"version":3,"names":["useState","FontAwesomeIcon","faThumbsUp","faThumbsDown","Button","Modal","axios","Noticia","AlterarStatusNoticia","props","API_URL_REMOVER_NOTICIA","exibirModal","setExibirModal","exibirModalSucesso","setExibirModalSucesso","exibirModalErro","setExibirModalErro","messagem","setMessagem","handleAbrirModal","event","preventDefault","handleFecharModal","handleFecharModalSucesso","setRecarregarNoticias","handleFecharModalErro","descricaoStatus","noticia","status","iconStatus","handleRemoverTarefa","novaNoticia","formData","FormData","append","JSON","stringify","post","codigo","data","response","message","titulo"],"sources":["C:/Users/anderson/Documents/instituto-itaquere/dashboard/src/components/noticias/tabela/alterar-status-noticia.js"],"sourcesContent":["import {\r\n    useState,\r\n} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {  \r\n    faThumbsUp,\r\n    faThumbsDown,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { \r\n    Button,\r\n    Modal\r\n} from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport Noticia from '../../../models/noticia.model';\r\n\r\nfunction AlterarStatusNoticia(props) {\r\n\r\n    const API_URL_REMOVER_NOTICIA = 'http://localhost/restful/noticias/';\r\n\r\n    const [exibirModal, setExibirModal] = useState(false);\r\n    const [exibirModalSucesso, setExibirModalSucesso] = useState(false);\r\n    const [exibirModalErro, setExibirModalErro] = useState(false);\r\n    const [messagem, setMessagem] = useState('');\r\n    \r\n    function handleAbrirModal(event){\r\n        event.preventDefault();\r\n        setExibirModal(true);\r\n    }\r\n\r\n    function handleFecharModal(){\r\n        setExibirModal(false);\r\n    }\r\n\r\n    function handleFecharModalSucesso(){\r\n        setExibirModalSucesso(false);\r\n        props.setRecarregarNoticias(true);\r\n    }\r\n\r\n    function handleFecharModalErro(){\r\n        setExibirModalErro(false);\r\n        props.setRecarregarNoticias(true);\r\n    }\r\n\r\n    function descricaoStatus() {\r\n        return props.noticia.status === 'S' ? 'desativar' : 'ativar';\r\n    }\r\n\r\n    function iconStatus() {\r\n        return props.noticia.status === 'S' ? faThumbsUp: faThumbsDown;\r\n    }\r\n\r\n    async function handleRemoverTarefa(event){\r\n        event.preventDefault();\r\n        try {\r\n            let status = props.noticia.status === 'S' ? 'N' : 'S'\r\n            const novaNoticia = new Noticia('', '', status);\r\n            const formData = new FormData();\r\n            formData.append('data', JSON.stringify(novaNoticia));\r\n            formData.append('method', 'status');\r\n            let { data } = await axios.post(API_URL_REMOVER_NOTICIA + props.noticia.codigo, formData);\r\n            setExibirModal(false);\r\n            if(data.status==='success'){\r\n                setMessagem(data.response);\r\n                setExibirModalSucesso(true);\r\n            } else {\r\n                setMessagem(\"Erro na Exclusão do Registro: \" + data.response);\r\n                setExibirModalErro(true);\r\n            }\r\n        } catch(err) {\r\n            setExibirModal(false);\r\n            setMessagem(\"Erro na Exclusão do Registro: \" + err.message);\r\n            setExibirModalErro(true);\r\n        }\r\n    }\r\n\r\n    return ( \r\n        <div>\r\n            <Button \r\n                className={'btn btn-light btn-sm'}\r\n                onClick={handleAbrirModal} >\r\n                <FontAwesomeIcon icon={iconStatus()} />\r\n            </Button>\r\n            <Modal \r\n                show={exibirModal} \r\n                onHide={handleFecharModal} \r\n                data-testid=\"modal\" >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Remover tarefa\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    Deseja realmente {descricaoStatus()} a noticia?\r\n                    <br />\r\n                    <strong>{props.noticia.titulo}</strong>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"primary\" \r\n                        onClick={handleRemoverTarefa}\r\n                        data-testid=\"btn-remover\" >\r\n                        Sim\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"light\" \r\n                        onClick={handleFecharModal}\r\n                        data-testid=\"btn-fechar-modal\" >\r\n                        Não\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            <Modal \r\n                show={exibirModalSucesso} \r\n                onHide={handleFecharModalSucesso} >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Sucesso\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {messagem}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"success\"\r\n                        onClick={handleFecharModalSucesso}>\r\n                        Continuar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n            <Modal \r\n                show={exibirModalErro} \r\n                onHide={handleFecharModalErro}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Erro\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {messagem}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"warning\"\r\n                        onClick={handleFecharModalErro}>\r\n                        Fechar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n\r\nAlterarStatusNoticia.propTypes = {\r\n    noticia: PropTypes.object.isRequired,\r\n    setRecarregarNoticias: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default AlterarStatusNoticia;"],"mappings":"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"},"metadata":{},"sourceType":"module"}