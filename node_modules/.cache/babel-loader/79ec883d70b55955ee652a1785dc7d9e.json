{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/anderson/Documents/instituto-itaquere/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Card,Button,Container,Row,Col,Form,Modal}from'react-bootstrap';import axios from'axios';import Usuario from'../../models/usuario.model';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){var URL_LOGIN='http://www.institutoitaquere.org.br/restful/usuarios';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),nome=_useState2[0],setNome=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),senha=_useState4[0],setSenha=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),exibirModalErro=_useState6[0],setExibirModalErro=_useState6[1];function efetuarLogin(_x){return _efetuarLogin.apply(this,arguments);}function _efetuarLogin(){_efetuarLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var novoUsuario,formData,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;event.preventDefault();novoUsuario=new Usuario(nome,senha);formData=new FormData();formData.append('data',JSON.stringify(novoUsuario));formData.append('method','login');_context.next=8;return axios.post(URL_LOGIN,formData);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.status==='success'){sessionStorage.setItem('token',data.response);console.log('aki 1');props.setCarregarToken(true);console.log('aki 2');}else{console.log('aki 3');setExibirModalErro(true);console.log('aki 4');}_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log('aki 5');setExibirModalErro(true);console.log('aki 6');case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return _efetuarLogin.apply(this,arguments);}function handleNome(event){setNome(event.target.value);}function handleSenha(event){setSenha(event.target.value);}function handleFecharModalErro(){setExibirModalErro(false);}return/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsxs(Card,{className:\"mt-5 mx-auto\",style:{width:'300px'},children:[/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Log In\"})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:efetuarLogin,children:[/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mt-2\",children:/*#__PURE__*/_jsx(Form.Label,{column:true,md:12,children:\"Usuario:\"})}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mt-2\",children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:nome,onChange:handleNome,required:true})})}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mt-2\",children:/*#__PURE__*/_jsx(Form.Label,{column:true,md:12,children:\"Senha:\"})}),/*#__PURE__*/_jsx(Form.Group,{as:Row,className:\"mt-2\",children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:senha,onChange:handleSenha,required:true})})}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,className:\"mt-3\",children:[/*#__PURE__*/_jsx(Col,{className:\"text-start\",md:6,children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",children:\"Cancelar\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-end\",md:6,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Acessar\"})})]})]})})})]}),/*#__PURE__*/_jsxs(Modal,{show:exibirModalErro,onHide:handleFecharModalErro,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Erro\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:\"Acesso Negado! Por favor, verifique o usu\\xE1rio e a senha digitados.\"}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:handleFecharModalErro,children:\"Fechar\"})})]})]});}export default Login;","map":{"version":3,"names":["useState","Card","Button","Container","Row","Col","Form","Modal","axios","Usuario","Login","props","URL_LOGIN","nome","setNome","senha","setSenha","exibirModalErro","setExibirModalErro","efetuarLogin","event","preventDefault","novoUsuario","formData","FormData","append","JSON","stringify","post","data","status","sessionStorage","setItem","response","console","log","setCarregarToken","handleNome","target","value","handleSenha","handleFecharModalErro","width"],"sources":["C:/Users/anderson/Documents/instituto-itaquere/dashboard/src/components/login/login.js"],"sourcesContent":["import {\r\n    useState,\r\n} from 'react';\r\nimport { \r\n    Card,\r\n    Button,\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Form,\r\n    Modal\r\n} from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport Usuario from '../../models/usuario.model';\r\n\r\nfunction Login(props) {\r\n\r\n    const URL_LOGIN = 'http://www.institutoitaquere.org.br/restful/usuarios';\r\n\r\n    const [nome, setNome] = useState('');\r\n    const [senha, setSenha] = useState('');\r\n    const [exibirModalErro, setExibirModalErro] = useState(false);\r\n\r\n    async function efetuarLogin(event){\r\n        try {\r\n            event.preventDefault();\r\n            const novoUsuario = new Usuario(nome, senha);\r\n            const formData = new FormData();\r\n            formData.append('data', JSON.stringify(novoUsuario));\r\n            formData.append('method', 'login');\r\n            let { data } = await axios.post(URL_LOGIN, formData);\r\n            if(data.status === 'success'){\r\n                sessionStorage.setItem('token', data.response);\r\n                console.log('aki 1');\r\n                props.setCarregarToken(true);\r\n                console.log('aki 2');\r\n            } else {\r\n                console.log('aki 3');\r\n                setExibirModalErro(true);\r\n                console.log('aki 4');\r\n            }\r\n        } catch (err) {\r\n            console.log('aki 5');\r\n            setExibirModalErro(true);\r\n            console.log('aki 6');\r\n        }\r\n    }\r\n\r\n    function handleNome(event){\r\n        setNome(event.target.value);\r\n    }\r\n\r\n    function handleSenha(event){\r\n        setSenha(event.target.value);\r\n    }\r\n\r\n    function handleFecharModalErro(){\r\n        setExibirModalErro(false);\r\n    }\r\n\r\n    return ( \r\n        <Container \r\n                fluid>\r\n            <Card \r\n                className=\"mt-5 mx-auto\"\r\n                style={{ width: '300px' }} >\r\n                <Card.Header>\r\n                    <h2>\r\n                        Log In\r\n                    </h2>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                    <Container >\r\n                        <Form \r\n                            onSubmit={efetuarLogin}>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Form.Label\r\n                                        column\r\n                                        md={12}>\r\n                                    Usuario:\r\n                                </Form.Label>\r\n                            </Form.Group>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Col \r\n                                    md={12}>\r\n                                    <Form.Control\r\n                                        type=\"text\"\r\n                                        value={nome} \r\n                                        onChange={handleNome}\r\n                                        required />\r\n                                </Col>\r\n                            </Form.Group>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Form.Label\r\n                                        column\r\n                                        md={12}>\r\n                                    Senha:\r\n                                </Form.Label>\r\n                            </Form.Group>\r\n                            <Form.Group\r\n                                as={Row}\r\n                                className=\"mt-2\">\r\n                                <Col \r\n                                    md={12}>\r\n                                    <Form.Control\r\n                                        type=\"password\"\r\n                                        value={senha} \r\n                                        onChange={handleSenha}\r\n                                        required />\r\n                                </Col>\r\n                            </Form.Group>\r\n                            <Form.Group \r\n                                as={Row} \r\n                                className=\"mt-3\">\r\n                                <Col \r\n                                    className=\"text-start\"\r\n                                    md={6}>\r\n                                    <Button \r\n                                        variant=\"danger\" >\r\n                                        Cancelar\r\n                                    </Button>\r\n                                </Col>\r\n                                <Col \r\n                                    className=\"text-end\"\r\n                                    md={6}>\r\n                                    <Button \r\n                                        variant=\"primary\" \r\n                                        type=\"submit\">\r\n                                        Acessar\r\n                                    </Button>\r\n                                </Col>\r\n                            </Form.Group>\r\n                        </Form>\r\n                    </Container>\r\n                </Card.Body>\r\n            </Card>\r\n            <Modal \r\n                show={exibirModalErro} \r\n                onHide={handleFecharModalErro}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        Erro\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    Acesso Negado! Por favor, verifique o usuário e a senha digitados.\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"warning\"\r\n                        onClick={handleFecharModalErro}>\r\n                        Fechar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </ Container>\r\n    );\r\n}\r\n\r\nLogin.propTypes = {\r\n    setCarregarToken: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}